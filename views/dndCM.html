<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>D&D Character Sheet</title>
  <!--<link rel="stylesheet" href="S:\WEBsites\2BDungeon5.0_Now_With_DND\public\dndCMStyle.css">-->
  <--<link rel="stylesheet" href="\dndCMStyle.css">-->
</head>
<body>
  <header>
    <form class="logo" action="/" method="GET">
        <button type="submit">
            <img src="images\tobyco-logo-4.png" alt="Logo" style="width: 250px; height: 250px;">
        </button>
    </form>
    <nav class="navigation">
        <form id="index-button" action="/" method="GET">
            <button type="submit">Home</button>
        </form>
        <form id="falloutCM-button" action="/falloutCM" method="GET">
          <button type="submit">Fallout Character Manager</button>
      </form>
        <form id="falloutGuide-button" action="/falloutGuide" method="GET">
            <button type="submit">Website Guide</button>
        </form>
        <form id="logout-button" action="/logout" method="POST">
            <input type="hidden" name="_csrf" value="<%= csrfToken %>">
            <button type="submit">Log Out</button>
        </form>
    </nav>
</header>
  <div class="container">

    <!-- Character Info -->
    <div class="section">
      <div style="display: flex; align-items: center; justify-content: space-between;">
        <h1 style="margin: 0;">Character Sheet</h1>
        <div>
          <button onclick="saveCharacter()">💾 Save</button>
          <button onclick="loadCharacter()">📂 Load</button>
        </div>
      </div>      
      <label>Name: <input type="text" name="characterName" value="Elaria Moonshadow"></label>
      <label>Level: <input type="number" name="level" value="5"></label>
      <label>XP: <input type="number" name="xp" value="6500"></label>
      <label>XP to Next Level: <input type="number" name="xpToNext" value="14000"></label>
      <label>Race: <input type="text" name="race" value="Half-Elf"></label>
    </div>

    <!-- Attributes + Skills Combined -->
<div class="section">
  <h2>Attributes & Skills</h2>
  <div class="flex-wrap">
    <div class="box">
      <label>Proficiency Bonus:
        <input type="number" name="proficiencyBonus" id="proficiencyBonus" value="2" readonly>
      </label>
    </div>
    <div class="box">
      <label>Strength: <input type="number" name="strength" value="10"></label>
      <div class="skill">Athletics: +<span id="athleticsMod">0</span> <input type="checkbox" name="athleticsProf"></div>
    </div>
    <div class="box">
      <label>Dexterity: <input type="number" name="dexterity" value="16"></label>
      <div class="skill">Acrobatics: +<span id="acrobaticsMod">0</span> <input type="checkbox" name="acrobaticsProf"></div>
      <div class="skill">Sleight of Hand: +<span id="sleightMod">0</span> <input type="checkbox" name="sleightProf"></div>
      <div class="skill">Stealth: +<span id="stealthMod">0</span> <input type="checkbox" name="stealthProf"></div>
    </div>

    <div class="box">
      <label>Constitution: <input type="number" name="constitution" value="14"></label>
      <!-- No direct skills for Constitution -->
    </div>

    <div class="box">
      <label>Intelligence: <input type="number" name="intelligence" value="12"></label>
      <div class="skill">Arcana: +<span id="arcanaMod">0</span> <input type="checkbox" name="arcanaProf"></div>
      <div class="skill">History: +<span id="historyMod">0</span> <input type="checkbox" name="historyProf"></div>
      <div class="skill">Investigation: +<span id="investigationMod">0</span> <input type="checkbox" name="investigationProf"></div>
      <div class="skill">Nature: +<span id="natureMod">0</span> <input type="checkbox" name="natureProf"></div>
      <div class="skill">Religion: +<span id="religionMod">0</span> <input type="checkbox" name="religionProf"></div>
    </div>

    <div class="box">
      <label>Wisdom: <input type="number" name="wisdom" value="13"></label>
      <div class="skill">Animal Handling: +<span id="animalHandlingMod">0</span> <input type="checkbox" name="animalHandlingProf"></div>
      <div class="skill">Insight: +<span id="insightMod">0</span> <input type="checkbox" name="insightProf"></div>
      <div class="skill">Medicine: +<span id="medicineMod">0</span> <input type="checkbox" name="medicineProf"></div>
      <div class="skill">Perception: +<span id="perceptionMod">0</span> <input type="checkbox" name="perceptionProf"></div>
      <div class="skill">Survival: +<span id="survivalMod">0</span> <input type="checkbox" name="survivalProf"></div>
    </div>

    <div class="box">
      <label>Charisma: <input type="number" name="charisma" value="18"></label>
      <div class="skill">Deception: +<span id="deceptionMod">0</span> <input type="checkbox" name="deceptionProf"></div>
      <div class="skill">Intimidation: +<span id="intimidationMod">0</span> <input type="checkbox" name="intimidationProf"></div>
      <div class="skill">Persuasion: +<span id="persuasionMod">0</span> <input type="checkbox" name="persuasionProf"></div>
      <div class="skill">Performance: +<span id="performanceMod">0</span> <input type="checkbox" name="performanceProf"></div>
    </div>
  </div>
  <div class="section">
    <h2>Equipment Training & Proficiencies</h2>
    <div class="flex-wrap">
      <div class="box">
        <label>Armor Proficiencies:<br>
          <textarea name="armorProficiencies" rows="2" style="width:100%;">Light Armor, Medium Armor</textarea>
        </label>
      </div>
      <div class="box">
        <label>Weapon Proficiencies:<br>
          <textarea name="weaponProficiencies" rows="2" style="width:100%;">Simple Weapons, Longswords, Rapiers</textarea>
        </label>
      </div>
      <div class="box">
        <label>Tool Proficiencies:<br>
          <textarea name="toolProficiencies" rows="2" style="width:100%;">Lute, Disguise Kit</textarea>
        </label>
      </div>
      <div class="box">
        <label>Languages:<br>
          <textarea name="languages" rows="2" style="width:100%;">Common, Elvish, Draconic</textarea>
        </label>
      </div>
    </div>
  </div>
</div>
    <!-- Combat Stats -->
    <div class="section">
      <h2>Combat Stats</h2>
      <div class="flex-wrap">
        <div class="box">
          <h3>Hit Points</h3>
          <label>Current: <input type="number" name="currentHP" value="28"></label><br>
          <label>Max: <input type="number" name="maxHP" value="35"></label>
        </div>
        <div class="box">
          <h3>Armor Class</h3>
          <input type="number" name="ac" value="15">
        </div>
        <div class="box">
          <h3>Initiative</h3>
          <input type="number" name="initiative" value="3">
        </div>
        <div class="box">
          <h3>Speed</h3>
          <input type="text" name="speed" value="30 ft.">
        </div>
        <div class="box">
          <h3>Size</h3>
          <select name="size">
            <option value="Tiny">Tiny</option>
            <option value="Small">Small</option>
            <option value="Medium" selected>Medium</option>
            <option value="Large">Large</option>
            <option value="Huge">Huge</option>
            <option value="Gargantuan">Gargantuan</option>
          </select>
        </div>
        <div class="box">
          <h3>Passive Perception</h3>
          <input type="number" name="passivePerception" id="passivePerception" value="11" readonly>
        </div>
      </div>
    </div>

    <!-- Defenses -->
    <div class="section">
      <h2>Defenses</h2>
      <div class="flex-wrap">
        <div class="box"><label>Resistances:<br><input type="text" name="resistances" value="Fire"></label></div>
        <div class="box"><label>Immunities:<br><input type="text" name="immunities" value="Poison"></label></div>
        <div class="box"><label>Vulnerabilities:<br><input type="text" name="vulnerabilities" value="Radiant"></label></div>
      </div>
    </div>

    <!-- Conditions -->
    <div class="section">
      <h2>Active Conditions</h2>
      <textarea name="conditions" rows="3" style="width:100%;" placeholder="E.g., Frightened, Grappled, Blessed">Blessed, Concentrating on Detect Magic</textarea>
    </div>

    <!-- Tabs -->
    <div class="tab-menu">
      <button class="tab-button active" onclick="switchTab('actions')">ACTIONS</button>
      <button class="tab-button" onclick="switchTab('spells')">SPELLS</button>
      <button class="tab-button" onclick="switchTab('inventory')">INVENTORY</button>
      <button class="tab-button" onclick="switchTab('features')">FEATURES & TRAITS</button>
      <button class="tab-button" onclick="switchTab('background')">BACKGROUND</button>
      <button class="tab-button" onclick="switchTab('notes')">NOTES</button>
      <button class="tab-button" onclick="switchTab('extras')">EXTRAS</button>
    </div>

    <!-- Tab Contents -->
    <div id="actions" class="tab-content active">
      <h2>Actions</h2>
      <p>Attacks per Action: 1</p>
    </div>

    <div id="spells" class="tab-content">
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <h2>Spells <button onclick="openSpellModal()">➕</button></h2>
      </div>
      <p>Your spellbook goes here.</p>
    
      <!-- Cantrips always visible -->
      <div class="section">
        <h3>Cantrips</h3>
        <ul id="spellsLevel0" class="feature-list"></ul>
      </div>
    
      <!-- All leveled spell sections will be dynamically created below -->
      <div id="spellSections"></div>
    </div>

    <div id="inventory" class="tab-content">
      <h2>Inventory</h2>
      <p>Equipment, weapons, tools, and treasures.</p>
      <button onclick="openAddItemModal()">Add Item to Inventory</button>
      <ul id="inventoryList" class="feature-list" style="margin-top: 20px;"></ul>
        <!-- Populated dynamically -->
      </div>
    </div>    
    
    <div id="features" class="tab-content">
      <h2>Features & Traits <button onclick="openFeatureModal()">➕</button></h2>
      <p>Class and racial features, feats, etc.</p>
    
      <div class="section">
        <h3>Class Features</h3>
        <ul id="classFeaturesList" class="feature-list"></ul>
      </div>
    
      <div class="section">
        <h3>Species Traits</h3>
        <ul id="speciesTraitsList" class="feature-list"></ul>
      </div>
    
      <div class="section">
        <h3>Feats</h3>
        <ul id="featsList" class="feature-list"></ul>
      </div>
    </div>
    
    
    <div id="background" class="tab-content">
      <h2>Background <button onclick="openBackgroundModal()">➕</button></h2>
      <p>Your character’s story and background traits.</p>
    
      <!-- Add Background Feature -->
      <ul id="backgroundFeatureList" class="feature-list"></ul>
    
      <!-- Character Characteristics -->
      <div class="section">
        <h3>Character Characteristics</h3>
        <div class="flex-wrap">
          <div class="box">
            <label>Alignment:<br>
              <select name="alignment">
                <option value="">-- Select Alignment --</option>
                <option>Lawful Good</option>
                <option>Chaotic Good</option>
                <option>Lawful Neutral</option>
                <option>Neutral Good</option>
                <option>True Neutral</option>
                <option>Neutral Evil</option>
                <option>Chaotic Neutral</option>
                <option>Lawful Evil</option>
                <option>Chaotic Evil</option>
              </select>
            </label>
          </div>
          <div class="box"><label>Gender:<br><input type="text" name="gender"></label></div>
          <div class="box"><label>Eyes:<br><input type="text" name="eyes"></label></div>
          <div class="box"><label>Size:<br>
            <select name="charSize">
              <option>Tiny</option>
              <option>Small</option>
              <option selected>Medium</option>
              <option>Large</option>
              <option>Huge</option>
              <option>Gargantuan</option>
            </select>
          </label></div>
          <div class="box"><label>Height:<br><input type="text" name="height"></label></div>
          <div class="box"><label>Faith:<br><input type="text" name="faith"></label></div>
          <div class="box"><label>Hair Color:<br><input type="text" name="hair"></label></div>
          <div class="box"><label>Skin:<br><input type="text" name="skin"></label></div>
          <div class="box"><label>Age:<br><input type="number" name="age"></label></div>
          <div class="box"><label>Weight:<br><input type="text" name="weight"></label></div>
        </div>
      </div>
    
      <!-- Personality Traits -->
      <div class="section">
        <h3>Personality Traits <button onclick="openPersonalityModal()">➕</button></h3>
        <ul id="personalityTraitList" class="feature-list"></ul>
      </div>
    
      <!-- Appearance Details -->
      <div class="section">
        <h3>Appearance Details <button onclick="openAppearanceModal()">➕</button></h3>
        <ul id="appearanceDetailList" class="feature-list"></ul>
      </div>
    </div>

    <div id="notes" class="tab-content"> 
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <h2>Notes <button onclick="openNotesModal()">➕</button></h2>
      </div>
      <p>Player or DM notes, session details, reminders.</p>
    
      <div class="section">
        <h3>Organizations</h3>
        <ul id="notesOrganizations" class="feature-list"></ul>
      </div>
    
      <div class="section">
        <h3>Allies</h3>
        <ul id="notesAllies" class="feature-list"></ul>
      </div>
    
      <div class="section">
        <h3>Enemies</h3>
        <ul id="notesEnemies" class="feature-list"></ul>
      </div>
    
      <div class="section">
        <h3>Backstory</h3>
        <ul id="notesBackstory" class="feature-list"></ul>
      </div>
    
      <div class="section">
        <h3>Other</h3>
        <ul id="notesOther" class="feature-list"></ul>
      </div>
    </div>

    <div id="extras" class="tab-content">
      <h2>Extras</h2>
      <p>Custom sections, mounts, companions, etc.</p>
    </div>

  </div>

<!-- Item Search Modal -->
<div id="addItemModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeAddItemModal()">&times;</span>
    <h3>Search Items</h3>
    <form id="addItemForm">
      <label>Item Name:<br>
        <input type="text" name="searchQuery" required>
      </label><br><br>
      <button type="submit">Search</button>
    </form>

    <div id="searchResults" style="margin-top: 20px;"></div>
  </div>
</div>

<!-- Add Feature Modal -->
<div id="featureModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeFeatureModal()">&times;</span>
    <h3>Add New Feature</h3>
    <form id="featureForm" onsubmit="submitFeature(event)">
      <label>
        Feature Type:<br>
        <select name="featureType" required>
          <option value="Class">Class</option>
          <option value="Species">Species</option>
          <option value="Feat">Feat</option>
        </select>
      </label><br><br>

      <label>
        Feature Name:<br>
        <input type="text" name="featureName" required style="width: 100%;">
      </label><br><br>

      <label>
        Description:<br>
        <textarea name="featureDescription" rows="4" style="width: 100%;" required></textarea>
      </label><br><br>

      <button type="submit">Add Feature</button>
    </form>
  </div>
</div>

<!-- Background Feature Modal -->
<div id="backgroundFeatureModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeBackgroundFeatureModal()">&times;</span>
    <h3>Add Background Feature</h3>
    <form onsubmit="submitBackgroundFeature(event)">
      <label>Name:<br><input type="text" name="backgroundFeatureName" required></label><br><br>
      <label>Description:<br><textarea name="backgroundFeatureDesc" rows="4" style="width: 100%;" required></textarea></label><br><br>
      <button type="submit">Add Feature</button>
    </form>
  </div>
</div>

<!-- Personality Trait Modal -->
<div id="personalityModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closePersonalityModal()">&times;</span>
    <h3>Add Personality Trait</h3>
    <form onsubmit="submitPersonalityTrait(event)">
      <label>Name:<br><input type="text" name="personalityTraitName" required></label><br><br>
      <label>Trait:<br><textarea name="personalityTrait" rows="3" style="width: 100%;" required></textarea></label><br><br>
      <button type="submit">Add Trait</button>
    </form>
  </div>
</div>

<!-- Appearance Detail Modal -->
<div id="appearanceModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeAppearanceModal()">&times;</span>
    <h3>Add Appearance Detail</h3>
    <form onsubmit="submitAppearanceDetail(event)">
      <label>Name:<br><input type="text" name="appearanceDetailName" required></label><br><br>
      <label>Detail:<br><textarea name="appearanceDetail" rows="3" style="width: 100%;" required></textarea></label><br><br>
      <button type="submit">Add Detail</button>
    </form>
  </div>
</div>

<!-- Notes Modal -->
<div id="notesModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeNotesModal()">&times;</span>
    <h3>Add Note</h3>
    <form onsubmit="submitNote(event)">
      <label>
        Note Type:<br>
        <select name="noteType" required>
          <option value="Organizations">Organizations</option>
          <option value="Allies">Allies</option>
          <option value="Enemies">Enemies</option>
          <option value="Backstory">Backstory</option>
          <option value="Other">Other</option>
        </select>
      </label><br><br>

      <label>
        Note Content:<br>
        <textarea name="noteContent" rows="4" style="width: 100%;" required></textarea>
      </label><br><br>

      <button type="submit">Add Note</button>
    </form>
  </div>
</div>

<!-- Add Spell Modal -->
<div id="spellModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeSpellModal()">&times;</span>
    <h3>Add Spell</h3>
    <form onsubmit="submitSpell(event)">
      
      <label>Spell Name:<br>
        <input type="text" name="spellName" required>
      </label><br><br>

      <label>Spell Level:<br>
        <select name="spellLevel" required>
          <option value="0">Cantrip</option>
          <option value="1">Level 1</option>
          <option value="2">Level 2</option>
          <option value="3">Level 3</option>
          <option value="4">Level 4</option>
          <option value="5">Level 5</option>
          <option value="6">Level 6</option>
          <option value="7">Level 7</option>
          <option value="8">Level 8</option>
          <option value="9">Level 9</option>
        </select>
      </label><br><br>

      <label>Casting Type:<br>
        <select name="castingType">
          <option>Prepared</option>
          <option>Innate</option>
          <option>At Will</option>
          <option>Pact Magic</option>
        </select>
      </label><br><br>
      <div id="atWillOptions" style="display: none; margin-top: 10px;">

        <label>Source of Spell:<br>
          <input type="text" name="sourceOfSpell" placeholder="e.g., Wand of Magic Missile, Circlet of Blasting">
        </label><br><br>
      
        <label>Use Limit:<br>
          <select name="useLimit" onchange="toggleUseCountField()">
            <option value="infinite">Infinite</option>
            <option value="finite">Finite</option>
            <option value="perDay">Per Day</option>
          </select>
          <span id="useCountWrapper" style="margin-left: 10px; display: none;">
            Uses: <input type="number" name="useCount" min="1" style="width: 60px;" value="1">
          </span>
        </label>
      
      </div>

      <label>School of Magic:<br>
        <select name="school">
          <option>Abjuration</option>
          <option>Conjuration</option>
          <option>Divination</option>
          <option>Enchantment</option>
          <option>Evocation</option>
          <option>Illusion</option>
          <option>Necromancy</option>
          <option>Transmutation</option>
        </select>
      </label><br><br>

      <fieldset style="border: 1px solid #555; padding: 10px; border-radius: 6px;">
        <legend>Components:</legend>
        <label><input type="checkbox" name="components" value="Verbal"> Verbal</label><br>
        <label><input type="checkbox" name="components" value="Somatic"> Somatic</label><br>
        <label><input type="checkbox" name="components" value="Material"> Material</label>
      </fieldset><br>

      <label><input type="checkbox" name="isPrepared"> Spell is currently prepared</label><br><br>

      <label>Activation Cost:<br>
        <select name="activationCost">
          <option>Action</option>
          <option>Bonus Action</option>
          <option>Reaction</option>
        </select>
      </label><br><br>

      <label>Action Type:<br>
        <select name="actionType">
          <option>Melee Spell Attack</option>
          <option>Ranged Spell Attack</option>
          <option>Melee Weapon Attack</option>
          <option>Ranged Weapon Attack</option>
          <option>Saving Throw</option>
          <option>Healing</option>
          <option>Ability Check</option>
          <option>Utility</option>
        </select>
      </label><br><br>

      <div id="attackDetails" style="display: none; margin-top: 10px;">

        <label>Attribute Used:<br>
          <select name="attackAttribute">
            <option value="">-- Select Attribute --</option>
            <option value="Strength">Strength</option>
            <option value="Dexterity">Dexterity</option>
            <option value="Constitution">Constitution</option>
            <option value="Intelligence">Intelligence</option>
            <option value="Wisdom">Wisdom</option>
            <option value="Charisma">Charisma</option>
          </select>
        </label><br><br>
      
        <label>Number of Attacks:<br>
          <input type="number" name="numberOfAttacks" min="1" value="1" style="width: 60px;">
        </label>
      
      </div>

      <label>Level Scaling:<br>
        <select name="scalingDice">
          <option value="">None</option>
          <option value="d4">d4</option>
          <option value="d6">d6</option>
          <option value="d8">d8</option>
          <option value="d10">d10</option>
          <option value="d12">d12</option>
        </select>
        × <input type="number" name="scalingDiceCount" min="1" style="width: 60px;" placeholder="0">
      </label><br><br>

      <label>Description:<br>
        <textarea name="spellDescription" rows="4" style="width: 100%;"></textarea>
      </label><br><br>

      <button type="submit">Add Spell</button>
    </form>
    <div id="delete-container" style="text-align: right; margin-top: 10px;">
      <button type="button" id="deleteSpellButton" onclick="deleteSpell()" style="
        background-color: #8b0000;
        color: white;
        padding: 6px 12px;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        display: none;
      ">🗑️ Delete Spell</button>
  </div>
  </div>
</div>


<!--<script src="S:\WEBsites\2BDungeon5.0_Now_With_DND\public\dndCMScripts.js"></script>-->
<--<script src="\dndCMScripts.js"></script>-->
</body>
</html>
